(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{466:function(e,t,n){var r=n(144),a=n(471),o=r.bind(a);for(var c in a)o[c]=a[c];e.exports=o},471:function(e,t,n){},481:function(e,t,n){"use strict";n.r(t);var r=n(143),a=n(48),o=n(73),c=n(142),i=n(26),l=n(54),s=n(0),u=n.n(s),b=n(145),m=n(466),f=n.n(m),d=function(e){var t=e.page,n=e.active;return u.a.createElement("li",{className:f()("page-item",{active:n}),"aria-current":n?"page":void 0},u.a.createElement(b.a,{to:"/post-list/".concat(t),className:f()("page-link",Object(l.b)("page-".concat(t)))},t,n&&u.a.createElement("span",{className:"sr-only"},"(current)")))},p=function(e){var t=e.page;return u.a.createElement("nav",{"aria-label":"Page navigation example"},u.a.createElement("ul",{className:"pagination justify-content-center"},[1,2,3,4,5].map(function(e){return u.a.createElement(d,{key:e,page:e,active:e===t})})))},g=n(472),h=n.n(g);h.a.setAppElement(document.body);var O=function(e){var t=e.isLoading,n=e.fullName,r=e.onCloseAuthorModal;return u.a.createElement(h.a,{isOpen:!0,contentLabel:"Author Infomation",style:{content:{width:"400px",height:"100px",fontSize:"24px",textAlign:"center",margin:"30px auto",paddingTop:"30px"}}},t&&u.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},u.a.createElement("span",{className:"sr-only"},"Loading...")),n," ",u.a.createElement("button",{type:"button",onClick:r,className:f()("btn btn-primary btn-sm",Object(l.b)("global-author-modal"))},"Close"))},j=n(465),E=n(21),A=function(e){var t=e.id,n=e.title,r=e.author,a=e.commenters,o=e.email,c=e.star,i=e.onStar,s=e.onStarTransient,b=e.onClearStarLoading,m=e.onViewAuthor,d=e.isChecked,p=e.onToggleCheck;return u.a.createElement("tr",null,u.a.createElement("th",{scope:"row"},u.a.createElement("input",{type:"checkbox",checked:d,onChange:function(){p(t)}})," ",t),u.a.createElement("td",null,n),u.a.createElement("td",{className:f()("operation")},r," ",u.a.createElement("button",{type:"button",onClick:function(){m(t)},className:f()("oi oi-eye","no-border",Object(l.b)("view-author"))})," ",a.length),u.a.createElement("td",null,o),u.a.createElement("td",{className:f()("operation")}," ",s&&s.isLoading&&u.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},u.a.createElement("span",{className:"sr-only"},"Loading...")),(!s||!s.isLoading)&&u.a.createElement("button",{type:"button",onClick:function(){i(t)},className:f()("oi oi-star","no-border",{star:c},Object(l.b)("star-post"))})," ",s&&!s.isLoading&&s.error&&u.a.createElement("button",{type:"button",className:f()("error","no-border",Object(l.b)("confirm-star-error")),onClick:function(){b(t)}},"Failed! Click to Dimiss!")))};function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v=Object(i.e)(),k=v.withAsyncActionContextProvider,S=v.withAsyncActionContextConsumer,w=function(e){return{actionIds:e.actionIds,onTrackAsyncAction:e.setActionId,onUntrackAsyncAction:e.unsetActionId}};function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){C(e,t,n[t])})}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e,t){return Object(E.get)(["ui","posts",t.page,"ids"],e)},T=function(e,t){return e.entities.users},x=Object(c.a)(function(e,t){return e.entities.posts},P,T,function(e,t,n){if(t)return t.map(function(t){return N({},e[String(t)],{author:n[e[String(t)].author].fullName})})}),L=Object(c.a)(function(e,t){return Object(E.get)(["ui","posts",t.page,"buffer"],e)},P,function(e,t){return e&&t?e.filter(function(e){return!t.includes(e)}):[]}),I=Object(i.g)(Object(E.get)("actions"),function(e,t){return t.actionIds}),V=Object(c.a)(function(e,t){return Object(E.get)([t.modalPostAuthor],e.entities.posts)},T,I,function(e,t,n){var r=(n.onViewAuthor?n.onViewAuthor:{isLoading:void 0}).isLoading;return r?{isLoading:r}:N({isLoading:r},e?Object(E.get)([e.author],t):{})}),M=Object(c.a)(I,function(e,t){return t.page},function(e,t){if(e.onPage&&e.onPage[t])return e.onPage[t]}),U=Object(c.a)(I,function(e){if(e.onStar&&e.onStar)return e.onStar}),D=n(16),B=Object(r.b)(function(){var e=Object(c.a)(x,L,M,U,function(e,t,n,r){return{items:e,buffer:t,onPageTransient:n,onStarTransient:r}});return function(t,n){return e(t,n)}},function(e,t){return{onStar:function(n){var r=Object(i.i)(e(Object(i.d)(D.f)({id:n})));t.onTrackAsyncAction(["onStar",n],r)},onViewAuthor:function(n){var r=Object(i.i)(e(Object(i.d)(D.d)({postId:n})));t.onTrackAsyncAction("onViewAuthor",r),t.onViewAuthor(n)},onClearStarLoading:function(n){t.onUntrackAsyncAction(["onStar",n]),e(Object(j.a)(D.g)(t.actionIds.onStar[n]))}}}),F=Object(o.a)(function(e){var t=e.items,n=e.onPageTransient;return!t&&!n},Object(o.d)(function(){return u.a.createElement(u.a.Fragment,null,[1,2,3,4,5].map(function(e,t){return u.a.createElement("tr",{key:t},u.a.createElement("td",{colSpan:"5",className:"text-center"},"\xa0"))}))})),J=Object(o.a)(function(e){var t=e.items,n=e.onPageTransient;return!t&&n&&n.isLoading},Object(o.d)(function(){var e=[];return Object(l.c)(5)(function(t){return e.push(function(e){return u.a.createElement("tr",{key:e},u.a.createElement("td",{colSpan:"5",className:"text-center"},u.a.createElement("div",{className:"text-center"},u.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},u.a.createElement("span",{className:"sr-only"},"Loading...")))))}(t)),t+1})(1),e})),z=Object(o.a)(function(e){var t=e.items,n=e.onPageTransient;return!t&&n&&!n.isLoading},Object(o.d)(function(){return u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u6570\u636e!"))})),W=Object(o.b)(z,F,J),q=Object(o.b)(S,Object(o.e)(w),B,W)(function(e){e.page;var t=e.items,n=e.selected,r=e.onStar,a=e.onStarTransient,o=e.onClearStarLoading,c=e.onViewAuthor,i=e.onToggleCheck;e.transients;return t.map(function(e){return u.a.createElement(A,y({key:e.id},e,{isChecked:(n||[]).includes(e.id),onStar:r,onStarTransient:Object(E.get)(e.id,a),onViewAuthor:c,onToggleCheck:i,onClearStarLoading:o}))})}),G=Object(r.b)(function(){var e=Object(c.a)(x,L,M,function(e,t,n){return{items:e,buffer:t,onPageTransient:n}});return function(t,n){return e(t,n)}},function(e,t){return{onAccept:function(){e(Object(j.a)(D.a)({page:t.page}))}}}),H=Object(o.a)(function(e){var t=e.items,n=(e.buffer,e.onPageTransient);return t&&n&&n.isLoading},Object(o.d)(function(){return u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},u.a.createElement("div",{className:"text-center"},u.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},u.a.createElement("span",{className:"sr-only"},"Loading...")))))})),K=Object(o.a)(function(e){var t=e.items,n=e.buffer,r=e.onPageTransient;return!t||t&&!n.length&&!r||t&&r&&!r.isLoading&&!n.length},Object(o.d)(function(){return u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\xa0"))})),Q=Object(o.b)(H,K),R=Object(o.b)(S,Object(o.e)(w),G,Q)(function(e){var t=e.buffer,n=e.onAccept;return u.a.createElement("tr",{key:"buffer"},u.a.createElement("td",{colSpan:"5",className:"text-center"},"".concat(t.length," new records, click to")," ",u.a.createElement("button",{type:"button",onClick:n,className:f()("btn btn-outline-primary btn-sm",Object(l.b)("accept-new-buffer"))},"accpet!")))});function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Z=Object(r.b)(function(){return Object(c.a)(x,L,I,V,function(e,t){return t.page},function(e,t,n,r,a){return{page:Number(a),items:e,buffer:t,transients:n,modalAuthorInfo:r}})},function(e,t){return{onPage:function(n){var r=Object(i.i)(e(Object(i.d)(D.c)({page:n})));t.onTrackAsyncAction(["onPage",n],r)},onCloseAuthorModal:function(){t.setModalPostAuthor(void 0)},onBatchStar:function(){t.selected.forEach(function(n){var r=Object(i.i)(e(Object(i.d)(D.f)({id:n})));t.onTrackAsyncAction(["onStar",n],r)})},onToggleCheck:function(e){t.selected.includes(e)?t.setSelected(t.selected.filter(function(t){return t!==e})):t.setSelected([].concat(Y(t.selected),[e]))},onViewAuthor:function(e){t.setModalPostAuthor(e)}}}),$=Object(o.c)({componentDidMount:function(){this.controller=new AbortController;var e=this.props,t=e.page,n=e.onPage;Object(l.a)(2,this.controller.signal).then(function(){return n(t)})},componentDidUpdate:function(e){var t=this.props,n=t.page,r=t.onPage;e.page!==n&&Object(l.a)(2,this.controller.signal).then(function(){return r(n)})},componentWillUnmount:function(){this.controller.abort()}}),_=Object(o.b)(Object(o.f)("selected","setSelected",[]),Object(o.f)("modalPostAuthor","setModalPostAuthor",void 0));t.default=Object(a.f)(Object(o.b)(_,k,S,Object(o.e)(w),Z,$)(function(e){var t=e.page,n=e.modalPostAuthor,r=e.modalAuthorInfo,a=e.selected,o=e.onToggleCheck,c=e.onCloseAuthorModal,i=e.onBatchStar,s=e.onTrackAsyncAction,b=e.onUntrackAsyncAction,m=e.onViewAuthor;return u.a.createElement("div",{className:"mx-auto"},u.a.createElement("table",{className:"table"},u.a.createElement("thead",{className:"thead-dark"},u.a.createElement("tr",null,u.a.createElement("th",{scope:"col"},"Id"),u.a.createElement("th",{scope:"col"},"Title"),u.a.createElement("th",{scope:"col"},"Author/Commenter Number"),u.a.createElement("th",{scope:"col"},"E-mail"),u.a.createElement("th",{scope:"col",style:{width:"200px"}},"Operation"))),u.a.createElement("tbody",null,u.a.createElement(q,{page:t,selected:a,onToggleCheck:o,onTrackAsyncAction:s,onUntrackAsyncAction:b,onViewAuthor:m}),u.a.createElement(R,{page:t}))),u.a.createElement("div",null,u.a.createElement("button",{type:"button",onClick:i,className:f()("btn btn-primary btn-sm",Object(l.b)("batch-star"))},"Star selected"),u.a.createElement("br",null),u.a.createElement("br",null)),u.a.createElement(p,{page:t}),!!n&&u.a.createElement(O,X({},r,{onCloseAuthorModal:c})))}))}}]);
//# sourceMappingURL=PostList.da59666f5cbf138f1db9.chunk.js.map