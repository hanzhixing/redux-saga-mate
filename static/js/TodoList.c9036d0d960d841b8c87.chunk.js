(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1591:function(e,t,n){var a=n(172),o=n(1596),r=a.bind(o);for(var c in o)o.hasOwnProperty(c)&&("function"===typeof Object.defineProperty?Object.defineProperty(r,c,{value:o[c]}):r[c]=o[c]);e.exports=r},1596:function(e,t,n){},1606:function(e,t,n){"use strict";n.r(t);var a=n(171),o=n(50),r=n(74),c=n(170),s=n(36),l=n(63),i=n(0),b=n.n(i),m=n(173),d=n(1591),p=n.n(d);const u=({page:e,active:t})=>b.a.createElement("li",{className:p()("page-item",{active:t}),"aria-current":t?"page":void 0},b.a.createElement(m.a,{to:"/todo-list/".concat(e),className:p()("page-link",Object(l.b)("page-".concat(e)))},e,t&&b.a.createElement("span",{className:"sr-only"},"(current)")));var g=({page:e})=>b.a.createElement("nav",{"aria-label":"Page navigation example"},b.a.createElement("ul",{className:"pagination justify-content-center"},[1,2,3,4,5].map(t=>b.a.createElement(u,{key:t,page:t,active:t===e})))),O=n(1597),j=n.n(O);j.a.setAppElement(document.body);var h=({isLoading:e,name:t,onCloseAuthorModal:n})=>b.a.createElement(j.a,{isOpen:!0,contentLabel:"Author Infomation",style:{content:{width:"400px",height:"100px",fontSize:"24px",textAlign:"center",margin:"30px auto",paddingTop:"30px"}}},e&&b.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},b.a.createElement("span",{className:"sr-only"},"Loading...")),t," ",b.a.createElement("button",{type:"button",onClick:n,className:p()("btn btn-primary btn-sm",Object(l.b)("global-author-modal"))},"Close")),f=n(1588);var E=()=>{const e=[];return Object(l.c)(5)(t=>(e.push((e=>b.a.createElement("tr",{key:e},b.a.createElement("td",{colSpan:"4",className:"text-center"},b.a.createElement("div",{className:"text-center"},b.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},b.a.createElement("span",{className:"sr-only"},"Loading..."))))))(t)),t+1))(1),e},y=n(31);var A=({id:e,title:t,author:n,commenters:a,star:o,onStar:r,onStarTransient:c,onClearStarLoading:s,onViewAuthor:i,isChecked:m,onToggleCheck:d})=>b.a.createElement("tr",null,b.a.createElement("th",{scope:"row"},b.a.createElement("input",{type:"checkbox",checked:m,onChange:()=>{d(e)}})," ",e),b.a.createElement("td",null,t),b.a.createElement("td",{className:p()("operation")},n," ",b.a.createElement("button",{type:"button",onClick:()=>{i(e)},className:p()("oi oi-eye",Object(l.b)("view-author"))})," ",a.length),b.a.createElement("td",{className:p()("operation")}," ",c&&c.isLoading&&b.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},b.a.createElement("span",{className:"sr-only"},"Loading...")),(!c||!c.isLoading)&&b.a.createElement("button",{type:"button",onClick:()=>{r(e)},className:p()("oi oi-star","no-border",{star:o},Object(l.b)("star-todo"))})," ",c&&!c.isLoading&&c.error&&b.a.createElement("button",{type:"button",className:p()("text","text-danger","no-border",Object(l.b)("confirm-star-error")),onClick:()=>{s(e)}},"Failed! Click to Dimiss!")));function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var w=({items:e,selected:t,onStar:n,onStarTransient:a,onClearStarLoading:o,onViewAuthor:r,onToggleCheck:c})=>e.map(e=>b.a.createElement(A,v({key:e.id},e,{isChecked:(t||[]).includes(e.id),onStar:n,onStarTransient:Object(y.get)(e.id,a),onViewAuthor:r,onToggleCheck:c,onClearStarLoading:o})));const k=Object(s.e)(),S=k.withAsyncActionContextProvider,N=k.withAsyncActionContextConsumer,C=({actionIds:e,setActionId:t,unsetActionId:n})=>({actionIds:e,onTrackAsyncAction:t,onUntrackAsyncAction:n});function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const L=(e,t)=>Object(y.get)(["ui","todos",t.page,"ids"],e),I=e=>e.entities.users,V=Object(c.a)(e=>e.entities.todos,L,I,(e,t,n)=>{if(t)return t.map(t=>T({},e[String(t)],{author:n[e[String(t)].author].name}))}),D=Object(c.a)((e,t)=>Object(y.get)(["ui","todos",t.page,"buffer"],e),L,(e,t)=>e&&t?e.filter(e=>!t.includes(e)):[]),M=Object(s.h)(Object(y.get)("actions"),(e,t)=>t.actionIds),U=Object(c.a)((e,t)=>Object(y.get)([t.modalTodoAuthor],e.entities.todos),I,M,(e,t,n)=>{const a=(n.onViewAuthor?n.onViewAuthor:{isLoading:void 0}).isLoading;return a?{isLoading:a}:T({isLoading:a},e?Object(y.get)([e.author],t):{})}),B=Object(c.a)(M,(e,t)=>t.page,(e,t)=>{if(e.onPage&&e.onPage[t])return e.onPage[t]}),F=Object(c.a)(M,e=>{if(e.onStar&&e.onStar)return e.onStar});var J=n(23);const z=Object(a.b)(()=>{const e=Object(c.a)(V,D,B,F,(e,t,n,a)=>({items:e,buffer:t,onPageTransient:n,onStarTransient:a}));return(t,n)=>e(t,n)},(e,{onTrackAsyncAction:t,onViewAuthor:n,onUntrackAsyncAction:a,actionIds:o})=>({onStar:n=>{const a=e(Object(s.d)(J.f)({id:n}));t(["onStar",n],Object(s.j)(a))},onViewAuthor:a=>{const o=e(Object(s.d)(J.d)({todoId:a}));t("onViewAuthor",Object(s.j)(o)),n(a)},onClearStarLoading:t=>{a(["onStar",t]),e(Object(f.a)(J.g)(o.onStar[t]))}})),W=Object(r.a)(({items:e,onPageTransient:t})=>!e&&!t,Object(r.d)(()=>b.a.createElement(b.a.Fragment,null,[1,2,3,4,5].map((e,t)=>b.a.createElement("tr",{key:t},b.a.createElement("td",{colSpan:"4",className:"text-center"},"\xa0")))))),q=Object(r.a)(({items:e,onPageTransient:t})=>!e&&t&&t.isLoading,Object(r.d)(E)),G=Object(r.a)(({items:e,onPageTransient:t})=>!e&&t&&!t.isLoading,Object(r.d)(()=>b.a.createElement("tr",null,b.a.createElement("td",{colSpan:"4",className:"text-center"},"\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u6570\u636e!")))),H=Object(r.b)(G,W,q);var K=Object(r.b)(N,Object(r.e)(C),z,H)(w);const Q=Object(a.b)(()=>{const e=Object(c.a)(V,D,B,(e,t,n)=>({items:e,buffer:t,onPageTransient:n}));return(t,n)=>e(t,n)},(e,t)=>({onAccept:()=>{e(Object(f.a)(J.a)({page:t.page}))}})),R=Object(r.a)(({items:e,onPageTransient:t})=>e&&t&&t.isLoading,Object(r.d)(()=>b.a.createElement("tr",null,b.a.createElement("td",{colSpan:"4",className:"text-center"},b.a.createElement("div",{className:"text-center"},b.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},b.a.createElement("span",{className:"sr-only"},"Loading..."))))))),X=Object(r.a)(({items:e,buffer:t,onPageTransient:n})=>!e||e&&!t.length&&!n||e&&n&&!n.isLoading&&!t.length,Object(r.d)(()=>b.a.createElement("tr",null,b.a.createElement("td",{colSpan:"4",className:"text-center"},"\xa0")))),Y=Object(r.b)(R,X);var Z=Object(r.b)(N,Object(r.e)(C),Q,Y)(({buffer:e,onAccept:t})=>b.a.createElement("tr",{key:"buffer"},b.a.createElement("td",{colSpan:"4",className:"text-center"},"".concat(e.length," new records, click to")," ",b.a.createElement("button",{type:"button",onClick:t,className:p()("btn btn-outline-primary btn-sm",Object(l.b)("accept-new-buffer"))},"accpet!"))));function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var _=({page:e,modalTodoAuthor:t,modalAuthorInfo:n,selected:a,onToggleCheck:o,onCloseAuthorModal:r,onBatchStar:c,onTrackAsyncAction:s,onUntrackAsyncAction:i,onViewAuthor:m})=>b.a.createElement("div",{className:"mx-auto"},b.a.createElement("table",{className:"table"},b.a.createElement("thead",{className:"thead-dark"},b.a.createElement("tr",null,b.a.createElement("th",{scope:"col"},"Id"),b.a.createElement("th",{scope:"col"},"Title"),b.a.createElement("th",{scope:"col"},"Author/Commenter Number"),b.a.createElement("th",{scope:"col",style:{width:"300px"}},"Operation"))),b.a.createElement("tbody",null,b.a.createElement(K,{page:e,selected:a,onToggleCheck:o,onTrackAsyncAction:s,onUntrackAsyncAction:i,onViewAuthor:m}),b.a.createElement(Z,{page:e}))),b.a.createElement("div",null,b.a.createElement("button",{type:"button",onClick:c,className:p()("btn btn-primary btn-sm",Object(l.b)("batch-star"))},"Star selected"),b.a.createElement("br",null),b.a.createElement("br",null)),b.a.createElement(g,{page:e}),!!t&&b.a.createElement(h,$({},n,{onCloseAuthorModal:r})));const ee=window.AbortController,te=Object(a.b)(()=>Object(c.a)(V,D,M,U,(e,t)=>t.page,(e,t,n,a,o)=>({page:Number(o),items:e,buffer:t,transients:n,modalAuthorInfo:a})),(e,{onTrackAsyncAction:t,setModalTodoAuthor:n,selected:a,setSelected:o})=>({onPage:n=>{const a=e(Object(s.d)(J.c)({page:n}));t(["onPage",n],Object(s.j)(a))},onCloseAuthorModal:()=>{n(void 0)},onBatchStar:()=>{a.forEach(n=>{const a=e(Object(s.d)(J.f)({id:n}));t(["onStar",n],Object(s.j)(a))})},onToggleCheck:e=>{a.includes(e)?o(a.filter(t=>t!==e)):o([...a,e])},onViewAuthor:e=>{n(e)}})),ne=Object(r.c)({componentDidMount(){this.controller=new ee;const e=this.props,t=e.page,n=e.onPage;Object(l.a)(0,this.controller.signal).then(()=>n(t))},componentDidUpdate(e){const t=this.props,n=t.page,a=t.onPage;e.page!==n&&Object(l.a)(0,this.controller.signal).then(()=>a(n))},componentWillUnmount(){this.controller.abort()}}),ae=Object(r.b)(Object(r.f)("selected","setSelected",[]),Object(r.f)("modalTodoAuthor","setModalTodoAuthor",void 0));t.default=Object(o.g)(Object(r.b)(ae,S,N,Object(r.e)(C),te,ne)(_))}}]);
//# sourceMappingURL=TodoList.c9036d0d960d841b8c87.chunk.js.map