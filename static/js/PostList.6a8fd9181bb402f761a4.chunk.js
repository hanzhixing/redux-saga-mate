(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{466:function(e,t,n){var a=n(144),r=n(471),c=a.bind(r);for(var o in r)c[o]=r[o];e.exports=c},471:function(e,t,n){},481:function(e,t,n){"use strict";n.r(t);var a=n(143),r=n(48),c=n(74),o=n(142),l=n(26),i=n(54),s=n(0),u=n.n(s),m=n(145),b=n(466),d=n.n(b),f=function(e){var t=e.page,n=e.active;return u.a.createElement("li",{className:d()("page-item",{active:n}),"aria-current":n?"page":void 0},u.a.createElement(m.a,{to:"/post-list/".concat(t),className:d()("page-link",Object(i.b)("page-".concat(t)))},t,n&&u.a.createElement("span",{className:"sr-only"},"(current)")))},p=function(e){var t=e.page;return u.a.createElement("nav",{"aria-label":"Page navigation example"},u.a.createElement("ul",{className:"pagination justify-content-center"},[1,2,3,4,5].map(function(e){return u.a.createElement(f,{key:e,page:e,active:e===t})})))},g=n(472),h=n.n(g);h.a.setAppElement(document.body);var E=function(e){var t=e.isLoading,n=e.fullName,a=e.onCloseAuthorModal;return u.a.createElement(h.a,{isOpen:!0,contentLabel:"Author Infomation",style:{content:{width:"400px",height:"100px",fontSize:"24px",textAlign:"center",margin:"30px auto",paddingTop:"30px"}}},t&&u.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},u.a.createElement("span",{className:"sr-only"},"Loading...")),n," ",u.a.createElement("button",{type:"button",onClick:a,className:d()("btn btn-primary btn-sm",Object(i.b)("global-author-modal"))},"Close"))},O=n(465),j=n(21),A=function(e){var t=e.id,n=e.title,a=e.author,r=e.commenters,c=e.email,o=e.star,l=e.onStar,s=e.onStarTransient,m=e.onClearStarLoading,b=e.onViewAuthor,f=e.isChecked,p=e.onToggleCheck;return u.a.createElement("tr",null,u.a.createElement("th",{scope:"row"},u.a.createElement("input",{type:"checkbox",checked:f,onChange:function(){p(t)}})," ",t),u.a.createElement("td",null,n),u.a.createElement("td",{className:d()("operation")},a," ",u.a.createElement("button",{type:"button",onClick:function(){b(t)},className:d()("oi oi-eye","no-border",Object(i.b)("view-author"))})," ",r.length),u.a.createElement("td",null,c),u.a.createElement("td",{className:d()("operation")}," ",s&&s.isLoading&&u.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},u.a.createElement("span",{className:"sr-only"},"Loading...")),(!s||!s.isLoading)&&u.a.createElement("button",{type:"button",onClick:function(){l(t)},className:d()("oi oi-star","no-border",{star:o},Object(i.b)("star-post"))})," ",s&&!s.isLoading&&s.error&&u.a.createElement("button",{type:"button",className:d()("error","no-border",Object(i.b)("confirm-star-error")),onClick:function(){m(t)}},"Failed! Click to Dimiss!")))};function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var y=Object(l.e)(),S=y.withAsyncActionContextProvider,N=y.withAsyncActionContextConsumer,k=function(e){return{actionIds:e.actionIds,onTrackAsyncAction:e.setActionId,onUntrackAsyncAction:e.unsetActionId}};function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){x(e,t,n[t])})}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e,t){return Object(j.get)(["ui","posts",t.page,"ids"],e)},P=function(e,t){return e.entities.users},T=Object(o.a)(function(e,t){return e.entities.posts},C,P,function(e,t,n){if(t)return t.map(function(t){return w({},e[String(t)],{author:n[e[String(t)].author].fullName})})}),L=Object(o.a)(function(e,t){return Object(j.get)(["ui","posts",t.page,"buffer"],e)},C,function(e,t){return e&&t?e.filter(function(e){return!t.includes(e)}):[]}),I=Object(l.g)(Object(j.get)("actions"),function(e,t){return t.actionIds}),V=Object(o.a)(function(e,t){return Object(j.get)([t.modalPostAuthor],e.entities.posts)},P,I,function(e,t,n){var a=(n.onViewAuthor?n.onViewAuthor:{isLoading:void 0}).isLoading;return a?{isLoading:a}:w({isLoading:a},e?Object(j.get)([e.author],t):{})}),M=Object(o.a)(I,function(e,t){return t.page},function(e,t){if(e.onPage&&e.onPage[t])return e.onPage[t]}),U=Object(o.a)(I,function(e){if(e.onStar&&e.onStar)return e.onStar}),D=n(16),B=Object(a.b)(function(){var e=Object(o.a)(T,L,M,U,function(e,t,n,a){return{items:e,buffer:t,onPageTransient:n,onStarTransient:a}});return function(t,n){return e(t,n)}},function(e,t){return{onStar:function(n){var a=Object(l.i)(e(Object(l.d)(D.f)({id:n})));t.onTrackAsyncAction(["onStar",n],a)},onViewAuthor:function(n){var a=Object(l.i)(e(Object(l.d)(D.d)({postId:n})));t.onTrackAsyncAction("onViewAuthor",a),t.onViewAuthor(n)},onClearStarLoading:function(n){t.onUntrackAsyncAction(["onStar",n]),e(Object(O.a)(D.g)(t.actionIds.onStar[n]))}}}),F=Object(c.a)(function(e){var t=e.items,n=e.onPageTransient;return!t&&!n},Object(c.d)(function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\xa0")),u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\xa0")),u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\xa0")),u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\xa0")),u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\xa0")),u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\xa0")),u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\xa0")),u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\xa0")),u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\xa0")),u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\xa0")))})),J=Object(c.a)(function(e){var t=e.items,n=e.onPageTransient;return!t&&n&&n.isLoading},Object(c.d)(function(){var e=[];return Object(i.c)(10)(function(t){return e.push(function(e){return u.a.createElement("tr",{key:e},u.a.createElement("td",{colSpan:"5",className:"text-center"},u.a.createElement("div",{className:"text-center"},u.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},u.a.createElement("span",{className:"sr-only"},"Loading...")))))}(t)),t+1})(1),e})),z=Object(c.a)(function(e){var t=e.items,n=e.onPageTransient;return!t&&n&&!n.isLoading},Object(c.d)(function(){return u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u6570\u636e!"))})),W=Object(c.b)(z,F,J),q=Object(c.b)(N,Object(c.e)(k),B,W)(function(e){e.page;var t=e.items,n=e.selected,a=e.onStar,r=e.onStarTransient,c=e.onClearStarLoading,o=e.onViewAuthor,l=e.onToggleCheck;e.transients;return t.map(function(e){return u.a.createElement(A,v({key:e.id},e,{isChecked:(n||[]).includes(e.id),onStar:a,onStarTransient:Object(j.get)(e.id,r),onViewAuthor:o,onToggleCheck:l,onClearStarLoading:c}))})}),G=Object(a.b)(function(){var e=Object(o.a)(T,L,M,function(e,t,n){return{items:e,buffer:t,onPageTransient:n}});return function(t,n){return e(t,n)}},function(e,t){return{onAccept:function(){e(Object(O.a)(D.a)({page:t.page}))}}}),H=Object(c.a)(function(e){var t=e.items,n=(e.buffer,e.onPageTransient);return t&&n&&n.isLoading},Object(c.d)(function(){return u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},u.a.createElement("div",{className:"text-center"},u.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},u.a.createElement("span",{className:"sr-only"},"Loading...")))))})),K=Object(c.a)(function(e){var t=e.items,n=e.buffer,a=e.onPageTransient;return!t||t&&!n.length&&!a||t&&a&&!a.isLoading&&!n.length},Object(c.d)(function(){return u.a.createElement("tr",null,u.a.createElement("td",{colSpan:"5",className:"text-center"},"\xa0"))})),Q=Object(c.b)(H,K),R=Object(c.b)(N,Object(c.e)(k),G,Q)(function(e){var t=e.buffer,n=e.onAccept;return u.a.createElement("tr",{key:"buffer"},u.a.createElement("td",{colSpan:"5",className:"text-center"},"".concat(t.length," new records, click to")," ",u.a.createElement("button",{type:"button",onClick:n,className:d()("btn btn-outline-primary btn-sm",Object(i.b)("accept-new-buffer"))},"accpet!")))});function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Z=Object(a.b)(function(){return Object(o.a)(T,L,I,V,function(e,t){return t.page},function(e,t,n,a,r){return{page:Number(r),items:e,buffer:t,transients:n,modalAuthorInfo:a}})},function(e,t){return{onPage:function(n){var a=Object(l.i)(e(Object(l.d)(D.c)({page:n})));t.onTrackAsyncAction(["onPage",n],a)},onCloseAuthorModal:function(){t.setModalPostAuthor(void 0)},onBatchStar:function(){t.selected.forEach(function(n){var a=Object(l.i)(e(Object(l.d)(D.f)({id:n})));t.onTrackAsyncAction(["onStar",n],a)})},onToggleCheck:function(e){t.selected.includes(e)?t.setSelected(t.selected.filter(function(t){return t!==e})):t.setSelected([].concat(Y(t.selected),[e]))},onViewAuthor:function(e){t.setModalPostAuthor(e)}}}),$=Object(c.c)({componentDidMount:function(){this.controller=new AbortController;var e=this.props,t=e.page,n=e.onPage;Object(i.a)(2,this.controller.signal).then(function(){return n(t)})},componentDidUpdate:function(e){var t=this.props,n=t.page,a=t.onPage;e.page!==n&&Object(i.a)(2,this.controller.signal).then(function(){return a(n)})},componentWillUnmount:function(){this.controller.abort()}}),_=Object(c.b)(Object(c.f)("selected","setSelected",[]),Object(c.f)("modalPostAuthor","setModalPostAuthor",void 0));t.default=Object(r.f)(Object(c.b)(_,S,N,Object(c.e)(k),Z,$)(function(e){var t=e.page,n=e.modalPostAuthor,a=e.modalAuthorInfo,r=e.selected,c=e.onToggleCheck,o=e.onCloseAuthorModal,l=e.onBatchStar,s=e.onTrackAsyncAction,m=e.onUntrackAsyncAction,b=e.onViewAuthor;return u.a.createElement("div",{className:"mx-auto"},u.a.createElement("table",{className:"table"},u.a.createElement("thead",{className:"thead-dark"},u.a.createElement("tr",null,u.a.createElement("th",{scope:"col"},"Id"),u.a.createElement("th",{scope:"col"},"Title"),u.a.createElement("th",{scope:"col"},"Author/Commenter Number"),u.a.createElement("th",{scope:"col"},"E-mail"),u.a.createElement("th",{scope:"col",style:{width:"200px"}},"Operation"))),u.a.createElement("tbody",null,u.a.createElement(q,{page:t,selected:r,onToggleCheck:c,onTrackAsyncAction:s,onUntrackAsyncAction:m,onViewAuthor:b}),u.a.createElement(R,{page:t}))),u.a.createElement("div",null,u.a.createElement("button",{type:"button",onClick:l,className:d()("btn btn-primary btn-sm",Object(i.b)("batch-star"))},"Star selected"),u.a.createElement("br",null),u.a.createElement("br",null)),u.a.createElement(p,{page:t}),!!n&&u.a.createElement(E,X({},a,{onCloseAuthorModal:o})))}))}}]);
//# sourceMappingURL=PostList.6a8fd9181bb402f761a4.chunk.js.map