(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1528:function(e,t,n){var r=n(149),a=n(1533),o=r.bind(a);for(var c in a)a.hasOwnProperty(c)&&("function"===typeof Object.defineProperty?Object.defineProperty(o,c,{value:a[c]}):o[c]=a[c]);e.exports=o},1533:function(e,t,n){e.exports={"link-button":"demo-src-components-TodoList-index-m__link-button--1VkjS"}},1543:function(e,t,n){"use strict";n.r(t);var r=n(148),a=n(48),o=n(74),c=n(147),i=n(25),l=n(53),u=n(0),s=n.n(u),b=n(150),m=n(1528),d=n.n(m),f=function(e){var t=e.page,n=e.active;return s.a.createElement("li",{className:d()("page-item",{active:n}),"aria-current":n?"page":void 0},s.a.createElement(b.a,{to:"/todo-list/".concat(t),className:d()("page-link",Object(l.b)("page-".concat(t)))},t,n&&s.a.createElement("span",{className:"sr-only"},"(current)")))},p=function(e){var t=e.page;return s.a.createElement("nav",{"aria-label":"Page navigation example"},s.a.createElement("ul",{className:"pagination justify-content-center"},[1,2,3,4,5].map(function(e){return s.a.createElement(f,{key:e,page:e,active:e===t})})))},g=n(1534),h=n.n(g);h.a.setAppElement(document.body);var O=function(e){var t=e.isLoading,n=e.name,r=e.onCloseAuthorModal;return s.a.createElement(h.a,{isOpen:!0,contentLabel:"Author Infomation",style:{content:{width:"400px",height:"100px",fontSize:"24px",textAlign:"center",margin:"30px auto",paddingTop:"30px"}}},t&&s.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")),n," ",s.a.createElement("button",{type:"button",onClick:r,className:d()("btn btn-primary btn-sm",Object(l.b)("global-author-modal"))},"Close"))},j=n(1527),y=n(21),A=function(e){var t=e.id,n=e.title,r=e.author,a=e.commenters,o=e.star,c=e.onStar,i=e.onStarTransient,u=e.onClearStarLoading,b=e.onViewAuthor,m=e.isChecked,f=e.onToggleCheck;return s.a.createElement("tr",null,s.a.createElement("th",{scope:"row"},s.a.createElement("input",{type:"checkbox",checked:m,onChange:function(){f(t)}})," ",t),s.a.createElement("td",null,n),s.a.createElement("td",{className:d()("operation")},r," ",s.a.createElement("button",{type:"button",onClick:function(){b(t)},className:d()("oi oi-eye",Object(l.b)("view-author"))})," ",a.length),s.a.createElement("td",{className:d()("operation")}," ",i&&i.isLoading&&s.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")),(!i||!i.isLoading)&&s.a.createElement("button",{type:"button",onClick:function(){c(t)},className:d()("oi oi-star","no-border",{star:o},Object(l.b)("star-todo"))})," ",i&&!i.isLoading&&i.error&&s.a.createElement("button",{type:"button",className:d()("text","text-danger","no-border",Object(l.b)("confirm-star-error")),onClick:function(){u(t)}},"Failed! Click to Dimiss!")))};function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v=Object(i.e)(),k=v.withAsyncActionContextProvider,S=v.withAsyncActionContextConsumer,w=function(e){return{actionIds:e.actionIds,onTrackAsyncAction:e.setActionId,onUntrackAsyncAction:e.unsetActionId}};function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){N(e,t,n[t])})}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e,t){return Object(y.get)(["ui","todos",t.page,"ids"],e)},x=function(e,t){return e.entities.users},P=Object(c.a)(function(e,t){return e.entities.todos},C,x,function(e,t,n){if(t)return t.map(function(t){return T({},e[String(t)],{author:n[e[String(t)].author].name})})}),L=Object(c.a)(function(e,t){return Object(y.get)(["ui","todos",t.page,"buffer"],e)},C,function(e,t){return e&&t?e.filter(function(e){return!t.includes(e)}):[]}),I=Object(i.g)(Object(y.get)("actions"),function(e,t){return t.actionIds}),V=Object(c.a)(function(e,t){return Object(y.get)([t.modalTodoAuthor],e.entities.todos)},x,I,function(e,t,n){var r=(n.onViewAuthor?n.onViewAuthor:{isLoading:void 0}).isLoading;return r?{isLoading:r}:T({isLoading:r},e?Object(y.get)([e.author],t):{})}),M=Object(c.a)(I,function(e,t){return t.page},function(e,t){if(e.onPage&&e.onPage[t])return e.onPage[t]}),U=Object(c.a)(I,function(e){if(e.onStar&&e.onStar)return e.onStar}),D=n(16),B=Object(r.b)(function(){var e=Object(c.a)(P,L,M,U,function(e,t,n,r){return{items:e,buffer:t,onPageTransient:n,onStarTransient:r}});return function(t,n){return e(t,n)}},function(e,t){return{onStar:function(n){var r=Object(i.i)(e(Object(i.d)(D.f)({id:n})));t.onTrackAsyncAction(["onStar",n],r)},onViewAuthor:function(n){var r=Object(i.i)(e(Object(i.d)(D.d)({todoId:n})));t.onTrackAsyncAction("onViewAuthor",r),t.onViewAuthor(n)},onClearStarLoading:function(n){t.onUntrackAsyncAction(["onStar",n]),e(Object(j.a)(D.g)(t.actionIds.onStar[n]))}}}),F=Object(o.a)(function(e){var t=e.items,n=e.onPageTransient;return!t&&!n},Object(o.d)(function(){return s.a.createElement(s.a.Fragment,null,[1,2,3,4,5].map(function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",{colSpan:"4",className:"text-center"},"\xa0"))}))})),J=Object(o.a)(function(e){var t=e.items,n=e.onPageTransient;return!t&&n&&n.isLoading},Object(o.d)(function(){var e=[];return Object(l.c)(5)(function(t){return e.push(function(e){return s.a.createElement("tr",{key:e},s.a.createElement("td",{colSpan:"4",className:"text-center"},s.a.createElement("div",{className:"text-center"},s.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))))}(t)),t+1})(1),e})),_=Object(o.a)(function(e){var t=e.items,n=e.onPageTransient;return!t&&n&&!n.isLoading},Object(o.d)(function(){return s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"4",className:"text-center"},"\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u6570\u636e!"))})),z=Object(o.b)(_,F,J),W=Object(o.b)(S,Object(o.e)(w),B,z)(function(e){e.page;var t=e.items,n=e.selected,r=e.onStar,a=e.onStarTransient,o=e.onClearStarLoading,c=e.onViewAuthor,i=e.onToggleCheck;e.transients;return t.map(function(e){return s.a.createElement(A,E({key:e.id},e,{isChecked:(n||[]).includes(e.id),onStar:r,onStarTransient:Object(y.get)(e.id,a),onViewAuthor:c,onToggleCheck:i,onClearStarLoading:o}))})}),q=Object(r.b)(function(){var e=Object(c.a)(P,L,M,function(e,t,n){return{items:e,buffer:t,onPageTransient:n}});return function(t,n){return e(t,n)}},function(e,t){return{onAccept:function(){e(Object(j.a)(D.a)({page:t.page}))}}}),G=Object(o.a)(function(e){var t=e.items,n=(e.buffer,e.onPageTransient);return t&&n&&n.isLoading},Object(o.d)(function(){return s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"4",className:"text-center"},s.a.createElement("div",{className:"text-center"},s.a.createElement("div",{className:"spinner-border spinner-border-sm",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading...")))))})),H=Object(o.a)(function(e){var t=e.items,n=e.buffer,r=e.onPageTransient;return!t||t&&!n.length&&!r||t&&r&&!r.isLoading&&!n.length},Object(o.d)(function(){return s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"4",className:"text-center"},"\xa0"))})),K=Object(o.b)(G,H),Q=Object(o.b)(S,Object(o.e)(w),q,K)(function(e){var t=e.buffer,n=e.onAccept;return s.a.createElement("tr",{key:"buffer"},s.a.createElement("td",{colSpan:"4",className:"text-center"},"".concat(t.length," new records, click to")," ",s.a.createElement("button",{type:"button",onClick:n,className:d()("btn btn-outline-primary btn-sm",Object(l.b)("accept-new-buffer"))},"accpet!")))});function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function X(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Y=Object(r.b)(function(){return Object(c.a)(P,L,I,V,function(e,t){return t.page},function(e,t,n,r,a){return{page:Number(a),items:e,buffer:t,transients:n,modalAuthorInfo:r}})},function(e,t){return{onPage:function(n){var r=Object(i.i)(e(Object(i.d)(D.c)({page:n})));t.onTrackAsyncAction(["onPage",n],r)},onCloseAuthorModal:function(){t.setModalTodoAuthor(void 0)},onBatchStar:function(){t.selected.forEach(function(n){var r=Object(i.i)(e(Object(i.d)(D.f)({id:n})));t.onTrackAsyncAction(["onStar",n],r)})},onToggleCheck:function(e){t.selected.includes(e)?t.setSelected(t.selected.filter(function(t){return t!==e})):t.setSelected([].concat(X(t.selected),[e]))},onViewAuthor:function(e){t.setModalTodoAuthor(e)}}}),Z=Object(o.c)({componentDidMount:function(){this.controller=new AbortController;var e=this.props,t=e.page,n=e.onPage;Object(l.a)(2,this.controller.signal).then(function(){return n(t)})},componentDidUpdate:function(e){var t=this.props,n=t.page,r=t.onPage;e.page!==n&&Object(l.a)(2,this.controller.signal).then(function(){return r(n)})},componentWillUnmount:function(){this.controller.abort()}}),$=Object(o.b)(Object(o.f)("selected","setSelected",[]),Object(o.f)("modalTodoAuthor","setModalTodoAuthor",void 0));t.default=Object(a.f)(Object(o.b)($,k,S,Object(o.e)(w),Y,Z)(function(e){var t=e.page,n=e.modalTodoAuthor,r=e.modalAuthorInfo,a=e.selected,o=e.onToggleCheck,c=e.onCloseAuthorModal,i=e.onBatchStar,u=e.onTrackAsyncAction,b=e.onUntrackAsyncAction,m=e.onViewAuthor;return s.a.createElement("div",{className:"mx-auto"},s.a.createElement("table",{className:"table"},s.a.createElement("thead",{className:"thead-dark"},s.a.createElement("tr",null,s.a.createElement("th",{scope:"col"},"Id"),s.a.createElement("th",{scope:"col"},"Title"),s.a.createElement("th",{scope:"col"},"Author/Commenter Number"),s.a.createElement("th",{scope:"col",style:{width:"300px"}},"Operation"))),s.a.createElement("tbody",null,s.a.createElement(W,{page:t,selected:a,onToggleCheck:o,onTrackAsyncAction:u,onUntrackAsyncAction:b,onViewAuthor:m}),s.a.createElement(Q,{page:t}))),s.a.createElement("div",null,s.a.createElement("button",{type:"button",onClick:i,className:d()("btn btn-primary btn-sm",Object(l.b)("batch-star"))},"Star selected"),s.a.createElement("br",null),s.a.createElement("br",null)),s.a.createElement(p,{page:t}),!!n&&s.a.createElement(O,R({},r,{onCloseAuthorModal:c})))}))}}]);
//# sourceMappingURL=TodoList.e6a02caed54cb6bbb16d.chunk.js.map