{"version":3,"sources":["index.m.scss","history.js","api/errors.js","api/index.js","sagas/index.js","reducers/ui/todos.js","reducers/ui/index.js","reducers/index.js","store/index.js","store/configureStore.js","components/App/index.jsx","fixpath.js","index.jsx","actions/types.js","components/App/GithubCat.svg","../../src/operation.js","../../src/phase.js","../../src/sign.js","../../src/action.js","../../src/reducer.js","../../src/hoc.js","../../src/saga.js","../../src/selector.js","config.js","utils/index.js"],"names":["classNames","locals","css","bind","style","hasOwnProperty","Object","defineProperty","value","module","exports","createBrowserHistory","basename","ENV_PUBLIC_URL","MyError","Error","constructor","message","super","this","name","captureStackTrace","stack","todo","schema","Entity","user","noop","to","delay","then","JSON","stringify","status","statusText","body","getManyTodo","page","Math","ceil","random","mockedTodos","define","author","commenters","repeat","PAGE_SIZE_OF_TODO_LIST","n","mockedCommenters","m","push","id","faker","firstName","utime","Date","toISOString","title","lorem","word","uniq","request","meta","response","normalize","patchOneTodo","args","mock","star","Number","data","omit","params","getOneUser","createDefaultWorker","makeCreateDefaultWorker","ActionTypes","autoclear","all","takeEvery","Api","state","action","todoId","payload","entities","todos","combineReducers","type","isFinished","error","result","pathOfBuffer","pathOfIds","get","length","set","compose","undefined","moveBufferToIds","EntityActionMap","UPDATE","k","l","r","concat","difference","DELETE","users","actions","createActionsReducer","session","groupByComposeByEntityType","createEntitiesReducer","ui","configureStore","initialState","storeName","LS_KEY","preloadedState","window","localStorage","setItem","parse","getItem","e","console","warn","composeEnhancers","composeWithDevTools","sagaMiddleware","createSagaMiddleware","store","createStore","rootReducer","applyMiddleware","run","rootSaga","subscribe","getState","LOCAL_STORAGE_REDUX_STORE_KEY","TodoList","loadable","fallback","SimpleButtons","navs","text","NavItem","className","activeClassName","App","href","target","rel","map","i","key","exact","path","component","match","last","LOCAL_STORAGE_PATH_BEFORE_404","history","replace","remove","fixpath","root","document","createElement","setAttribute","appendChild","render","CLEANUP","ASYNC_NOOP","ASYNC_GET_MANY_TODO","ASYNC_DELETE_ONE_TODO","ASYNC_PATCH_ONE_TODO","ACCEPT_UPDATE_TODO_LIST","ASYNC_GET_ONE_USER_BY_TODO_ID","React","GithubCat","props","defaultProps","default","SIGN","UUID_NAMESPACE","uuidv5","domain","TOP_LEVEL_KEYS","META_KEYS","getInvalidActionMessage","isReduxSagaMateAction","isPlainObject","keys","every","includes","idOfAction","curry","uuidv4","signal","trackFor","parent","child","pid","ctime","phase","succeedWith","progress","failWith","createTrackableAction","childAction","sign","createAsyncAction","createAsyncActionUnique","DEFAULT_ASYNC_ACTION_TYPE_REGEX","CleanupActionType","AsyncActionTypeRegex","Array","isArray","test","lensProp","mergeDeepRight","Errio","locators","entityActionMap","reduce","reducers","entityType","operations","operation","merger","locator","find","a","merge","mergeDeepWithKey","pk","createEntityTypeReducer","combinedReducers","entityTypes","flatten","queuedCombinedReducers","newCombined","queue","combined","acc","cur","final","reducer","v","mergeQueuedReducers","withStates","withStateHandlers","actionIds","setActionId","actionId","lens","lensPath","unsetActionId","dissocPath","withAsyncActionStateHandler","mapToProps","identity","withProps","createAsyncActionContext","createContext","Provider","Consumer","withAsyncActionContextProvider","ComponentIn","ComponentOut","rest","displayName","wrapDisplayName","withAsyncActionContextConsumer","context","ErrorType","autoclearByWorkerMaker","method","autoClearByWorker","defaultWorkerSaga","select","call","json","put","createAction","createSelectActions","selectActions","selectActionIds","createSelector","reduceRecursively","nextActionIds","DOMException","seconds","aborted","Promise","reject","resolve","timer","setTimeout","onabort","clearTimeout","recur","$n","f","x","loop","e2e","str"],"mappings":"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","file":"static/js/index.99cc6eac2faf85deb315.chunk.js","sourcesContent":["\n        // classnames-loader: automatically bind css-modules to classnames\n        var classNames = require(\"!../../node_modules/classnames/bind.js\");\n        var locals = require(\"!!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-2!../../node_modules/postcss-loader/src/index.js??postcss!../../node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-4-4!./index.m.scss\");\n        var css = classNames.bind(locals);\n        for (var style in locals) {\n            if (!locals.hasOwnProperty(style)) {\n                continue;\n            }\n            if (typeof Object.defineProperty === 'function') {\n                Object.defineProperty(css, style, {value: locals[style]});\n            }\n            else {\n                css[style] = locals[style];\n            }\n        }\n        module.exports = css;\n    ","import {createBrowserHistory} from 'history';\n\nexport default createBrowserHistory({basename: ENV_PUBLIC_URL});\n","export class MyError extends Error {\n    constructor(message = 'MyError') {\n        super(message);\n        this.name = 'MyError';\n        this.message = message;\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            this.stack = (new Error(message)).stack;\n        }\n    }\n}\n","import {normalize, schema} from 'normalizr';\nimport faker from 'faker';\nimport {omit, uniq} from 'lodash/fp';\nimport {delay, repeat} from '../utils';\nimport {PAGE_SIZE_OF_TODO_LIST} from '../config';\nimport {MyError} from './errors';\n\nconst todo = new schema.Entity('todos');\nconst user = new schema.Entity('users');\n\nexport const noop = ({to}) => delay(3).then(() => {\n    if (to === 'success') {\n        return;\n    }\n    throw new MyError(JSON.stringify({\n        status: 400,\n        statusText: 'Bad Request',\n        body: '收藏失败',\n    }));\n});\n\nexport const getManyTodo = ({page}) => delay(Math.ceil((Math.random() * 2))).then(() => {\n    const mockedTodos = [];\n\n    const createTodos = n => {\n        const mockedCommenters = [];\n\n        const createCommenters = m => {\n            mockedCommenters.push({\n                id: Math.ceil((Math.random() * 20)),\n                name: faker.name.firstName(),\n                utime: (new Date()).toISOString(),\n            });\n            return m + 1;\n        };\n\n        repeat(2)(createCommenters)(1);\n\n        mockedTodos.push({\n            id: `${n}${Math.ceil((Math.random() * 2))}`,\n            title: `${faker.lorem.word()}-${page}`,\n            author: {\n                id: Math.ceil((Math.random() * 20)),\n                name: faker.name.firstName(),\n                utime: (new Date()).toISOString(),\n            },\n            commenters: uniq(mockedCommenters),\n        });\n        return n + 1;\n    };\n\n    todo.define({\n        author: user,\n        commenters: [user],\n    });\n\n    repeat(PAGE_SIZE_OF_TODO_LIST)(createTodos)(page * PAGE_SIZE_OF_TODO_LIST);\n\n    return {\n        request: {\n            meta: {page},\n        },\n        response: {\n            ...normalize(mockedTodos, [todo]),\n        },\n    };\n});\n\n\nexport const patchOneTodo = ({...args}) => delay(Math.ceil((Math.random() * 4))).then(() => {\n    const mock = {\n        id: args.id,\n        star: true,\n        utime: (new Date()).toISOString(),\n    };\n\n    if (!(Number(args.id) % 3)) {\n        throw new MyError(JSON.stringify({\n            status: 400,\n            statusText: 'Bad Request',\n            body: '收藏失败',\n        }));\n    }\n\n    return {\n        request: {\n            data: {...omit(['id'], {...args})},\n            params: {id: args.id},\n        },\n        response: {\n            ...normalize(mock, todo),\n        },\n    };\n});\n\nexport const getOneUser = ({id}) => delay(Math.ceil((Math.random() * 3))).then(() => {\n    const mock = {\n        id,\n        name: faker.name.firstName(),\n        utime: (new Date()).toISOString(),\n    };\n\n    return {\n        request: {\n            params: {id},\n        },\n        response: {\n            ...normalize(mock, user),\n        },\n    };\n});\n","import {all, takeEvery} from 'redux-saga/effects';\nimport {makeCreateDefaultWorker} from 'redux-saga-mate';\nimport {MyError} from '../api/errors';\nimport * as ActionTypes from '../actions/types';\nimport * as Api from '../api';\n\nconst createDefaultWorker = makeCreateDefaultWorker(\n    [MyError, ActionTypes.CLEANUP],\n    {autoclear: true},\n);\n\n// Notice!\n// If you need more complicated logic controls then the default worker saga,\n// you need to implement your own worker sagas.\nexport default function* () {\n    yield all([\n        takeEvery(ActionTypes.ASYNC_NOOP, createDefaultWorker(Api.noop)),\n        takeEvery(ActionTypes.ASYNC_GET_MANY_TODO, createDefaultWorker(Api.getManyTodo)),\n        takeEvery(ActionTypes.ASYNC_PATCH_ONE_TODO, createDefaultWorker(Api.patchOneTodo)),\n        takeEvery(ActionTypes.ASYNC_GET_ONE_USER_BY_TODO_ID, createDefaultWorker(\n            Api.getOneUser,\n            (state, action) => {\n                const {todoId} = action.payload;\n                const {author} = state.entities.todos[todoId];\n                return {id: author};\n            },\n            // {autoclear: false},\n        )),\n    ]);\n}\n","import {isFinished} from 'redux-saga-mate';\nimport {compose, get, set} from 'lodash/fp';\nimport * as ActionTypes from '../../actions/types';\n\nexport default (state = {}, action) => {\n    switch (action.type) {\n        case ActionTypes.ASYNC_GET_MANY_TODO: {\n            if (isFinished(action) && !action.error) {\n                const {payload: {request: {meta: {page}}, response: {result}}} = action;\n                const pathOfBuffer = [page, 'buffer'];\n                const pathOfIds = [page, 'ids'];\n                if (page > 3 && (get(pathOfIds, state) || []).length > 0) {\n                    return set(pathOfBuffer, result, state);\n                }\n                return set(pathOfIds, result, state);\n            }\n            return state;\n        }\n        case ActionTypes.ACCEPT_UPDATE_TODO_LIST: {\n            const {payload: {page}} = action;\n            const pathOfBuffer = [page, 'buffer'];\n            const pathOfIds = [page, 'ids'];\n            const moveBufferToIds = compose(\n                set(pathOfBuffer, undefined),\n                set(pathOfIds, get(pathOfBuffer, state)),\n            );\n            return moveBufferToIds(state);\n        }\n        default: {\n            return state;\n        }\n    }\n};\n","import {combineReducers} from 'redux';\nimport todos from './todos';\n\nexport default combineReducers({todos});\n","import {combineReducers} from 'redux';\nimport {concat, difference} from 'lodash/fp';\nimport {\n    createActionsReducer,\n    createEntitiesReducer,\n    groupByComposeByEntityType,\n    UPDATE,\n    DELETE,\n} from 'redux-saga-mate';\nimport * as ActionTypes from '../actions/types';\nimport ui from './ui';\n\nconst EntityActionMap = {\n    todos: {\n        [ActionTypes.ASYNC_GET_MANY_TODO]: [\n            UPDATE,\n            (k, l, r) => (k === 'commenters' ? concat(l, difference(r, l)) : r),\n        ],\n        [ActionTypes.ASYNC_DELETE_ONE_TODO]: DELETE,\n        [ActionTypes.ASYNC_PATCH_ONE_TODO]: UPDATE,\n    },\n    users: {\n        [ActionTypes.ASYNC_GET_MANY_TODO]: UPDATE,\n        [ActionTypes.ASYNC_GET_ONE_USER_BY_TODO_ID]: UPDATE,\n    },\n};\n\nconst locators = {\n    UPDATE: [\n        ['response', 'entities'],\n    ],\n    DELETE: [\n        ['request', 'params', 'id'],\n    ],\n};\n\nexport default combineReducers({\n    actions: createActionsReducer([ActionTypes.CLEANUP, /^ASYNC_/]),\n    session: (state = {}) => state,\n    entities: combineReducers(\n        groupByComposeByEntityType(\n            createEntitiesReducer(locators, EntityActionMap),\n            {},\n        ),\n    ),\n    ui,\n});\n","import configureStore from './configureStore';\nimport {LOCAL_STORAGE_REDUX_STORE_KEY} from '../config';\n\nexport default configureStore(undefined, 'REDUX-SAGE-MATE-DEMO', LOCAL_STORAGE_REDUX_STORE_KEY);\n","/* global window */\nimport {createStore, applyMiddleware} from 'redux';\nimport {composeWithDevTools} from 'redux-devtools-extension';\nimport createSagaMiddleware from 'redux-saga';\nimport rootSaga from '../sagas';\nimport rootReducer from '../reducers';\n\nexport default (initialState = undefined, storeName = undefined, LS_KEY = 'REDUX-STORE') => {\n    let preloadedState;\n\n    try {\n        window.localStorage.setItem(LS_KEY, JSON.stringify({}));\n\n        preloadedState = initialState\n            || JSON.parse(window.localStorage.getItem(LS_KEY))\n            || undefined;\n    } catch (e) {\n        console.warn('The JSON data in Local Storage seems broken!');\n        preloadedState = undefined;\n    }\n\n    const composeEnhancers = composeWithDevTools({name: storeName});\n\n    const sagaMiddleware = createSagaMiddleware();\n\n    const store = createStore(\n        rootReducer,\n        preloadedState,\n        composeEnhancers(applyMiddleware(\n            sagaMiddleware,\n        )),\n    );\n\n    sagaMiddleware.run(rootSaga);\n\n    store.subscribe(() => window.localStorage.setItem(LS_KEY, JSON.stringify(store.getState())));\n\n    if (module.hot) {\n        module.hot.accept('../reducers', () => store.replaceReducer(rootReducer));\n    }\n\n    return store;\n};\n","import {hot} from 'react-hot-loader/root';\nimport {Switch, Route, Redirect, NavLink} from 'react-router-dom';\nimport loadable from '@loadable/component';\nimport GithubCat from './GithubCat.svg';\n\nconst TodoList = loadable(() => import(\n    /* webpackChunkName: \"TodoList\" */\n    '../../connects/TodoList'\n), {fallback: null});\n\nconst SimpleButtons = loadable(() => import(\n    /* webpackChunkName: \"SimpleButtons\" */\n    '../SimpleButtons'\n));\n\nconst navs = [\n    {\n        to: '/simple-buttons',\n        text: 'Simple Buttons',\n    },\n    {\n        to: '/todo-list',\n        text: 'Todo List',\n    },\n];\n\nconst NavItem = ({to, text}) => (\n    <li className=\"nav-item\">\n        <NavLink\n            className=\"nav-link\"\n            activeClassName=\"active h5\"\n            to={to}\n        >\n            {text}\n        </NavLink>\n    </li>\n);\n\nconst App = () => (\n    <>\n        <header className=\"col-12 text-center mt-3 mb-5\">\n            <a href=\"https://github.com/hanzhixing/redux-saga-mate.git\" target=\"_blank\" rel=\"noopener noreferrer\">\n                <GithubCat />\n            </a>\n        </header>\n        <div className=\"container-fluid\">\n            <div className=\"row flex-xl-nowrap\">\n                <nav className=\"col-2 border-left\">\n                    <ul className=\"nav flex-column\">\n                        {\n                            navs.map(({to, text}, i) => (\n                                <NavItem key={i} to={to} text={text} />\n                            ))\n                        }\n                    </ul>\n                </nav>\n                <main className=\"col-10 border-left border-right\">\n                    <Route exact path=\"/\" component={SimpleButtons} />\n                    <Route path=\"/simple-buttons\" component={SimpleButtons} />\n                    <Switch>\n                        <Route exact path=\"/todo-list\">\n                            {() => (<Redirect to=\"/todo-list/1\" />)}\n                        </Route>\n                        <Route path=\"/todo-list/:page\">\n                            {\n                                ({match: {params: {page}}}) => (<TodoList page={page} />)\n                            }\n                        </Route>\n                    </Switch>\n                </main>\n            </div>\n        </div>\n    </>\n);\n\nexport default hot(App);\n","import store from 'store';\nimport history from './history';\nimport {LOCAL_STORAGE_PATH_BEFORE_404} from './config';\n\nexport default () => {\n    const last = store.get(LOCAL_STORAGE_PATH_BEFORE_404);\n\n    if (last) {\n        history.replace(last);\n        store.remove(LOCAL_STORAGE_PATH_BEFORE_404);\n    }\n};\n","/* global document */\nimport 'bootstrap';\nimport 'open-iconic/font/css/open-iconic-bootstrap.min.css';\n\nimport {render} from 'react-dom';\nimport {Provider} from 'react-redux';\nimport {Router} from 'react-router';\nimport history from './history';\nimport fixpath from './fixpath';\nimport store from './store';\nimport App from './components/App';\n\nimport './index.m.scss';\n\nfixpath();\n\nconst root = document.createElement('div');\n\nroot.setAttribute('id', 'react-root');\n\ndocument.body.appendChild(root);\n\nrender(\n    <Provider store={store}>\n        <Router history={history}>\n            <App />\n        </Router>\n    </Provider>,\n    root,\n);\n","export const CLEANUP = 'CLEANUP';\nexport const ASYNC_NOOP = 'ASYNC_NOOP';\nexport const ASYNC_GET_MANY_TODO = 'ASYNC_GET_MANY_TODO';\nexport const ASYNC_DELETE_ONE_TODO = 'ASYNC_DELETE_ONE_TODO';\nexport const ASYNC_PATCH_ONE_TODO = 'ASYNC_PATCH_ONE_TODO';\nexport const ACCEPT_UPDATE_TODO_LIST = 'ACCEPT_UPDATE_TODO_LIST';\nexport const ASYNC_GET_ONE_USER_BY_TODO_ID = 'ASYNC_GET_ONE_USER_BY_TODO_ID';\n","var React = require('react');\n\nfunction GithubCat (props) {\n    return React.createElement(\"svg\",props,React.createElement(\"path\",{\"fillRule\":\"evenodd\",\"d\":\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z\"}));\n}\n\nGithubCat.defaultProps = {\"height\":\"32\",\"viewBox\":\"0 0 16 16\",\"version\":\"1.1\",\"width\":\"32\",\"aria-hidden\":\"true\"};\n\nmodule.exports = GithubCat;\n\nGithubCat.default = GithubCat;\n","export const UPDATE = 'UPDATE';\nexport const DELETE = 'DELETE';\n","// export const PHASE_GHOST = 'ghost'; // for optimistic\nexport const PHASE_STARTED = 'started';\nexport const PHASE_RUNNING = 'running';\nexport const PHASE_FINISH = 'finish';\n","export const SIGN = 'redux-saga-mate';\n","/* global document */\nimport curry from 'ramda/src/curry';\nimport isPlainObject from 'is-plain-object';\nimport stringify from 'json-stable-stringify';\nimport {v4 as uuidv4, v5 as uuidv5} from 'uuid';\nimport {PHASE_STARTED, PHASE_RUNNING, PHASE_FINISH} from './phase';\nimport {SIGN} from './sign';\n\nconst UUID_NULL = '00000000-0000-0000-0000-000000000000';\n\nconst UUID_NAMESPACE = uuidv5(document.domain, UUID_NULL);\n\nconst TOP_LEVEL_KEYS = ['type', 'payload', 'error', 'meta'];\n\nconst META_KEYS = ['sign', 'id', 'pid', 'phase', 'progress', 'ctime', 'utime', 'uniq'];\n\nconst getInvalidActionMessage = action => (\n    `Invalid ReduxSagaMateAction. ${JSON.stringify(action)}`\n);\n\nexport const isReduxSagaMateAction = action => {\n    if (!isPlainObject(action)) {\n        return false;\n    }\n\n    if (typeof action.type !== 'string') {\n        return false;\n    }\n\n    if (!Object.keys(action).every(k => TOP_LEVEL_KEYS.includes(k))) {\n        return false;\n    }\n\n    if (action.meta) {\n        if (!isPlainObject(action.meta)) {\n            return false;\n        }\n\n        if (!Object.keys(action.meta).every(k => META_KEYS.includes(k))) {\n            return false;\n        }\n    }\n\n    return true;\n};\n\nexport const idOfAction = curry((action, uniq = false) => {\n    if (!isReduxSagaMateAction(action)) {\n        throw new Error(getInvalidActionMessage(action));\n    }\n\n    const {type, payload, meta} = action;\n\n    if (meta && meta.id) {\n        return meta.id;\n    }\n\n    if (uniq) {\n        return uuidv4();\n    }\n\n    const signal = [type, payload];\n\n    return uuidv5(stringify(signal), UUID_NAMESPACE);\n});\n\nexport const pidOfAction = action => {\n    if (!isReduxSagaMateAction(action)) {\n        throw new Error(getInvalidActionMessage(action));\n    }\n\n    const {meta} = action;\n\n    return meta ? meta.pid : undefined;\n};\n\nexport const trackFor = curry((parent, child) => {\n    if (!isReduxSagaMateAction(parent)) {\n        throw new Error(getInvalidActionMessage(parent));\n    }\n\n    if (!isReduxSagaMateAction(child)) {\n        throw new Error(getInvalidActionMessage(child));\n    }\n\n    return {\n        ...child,\n        meta: {\n            id: idOfAction(child),\n            pid: idOfAction(parent),\n            ctime: (new Date()).toISOString(),\n        },\n    };\n});\n\nexport const isUnique = action => action.meta.uniq === true;\nexport const isStarted = action => action.meta.phase === PHASE_STARTED;\nexport const isRunning = action => action.meta.phase === PHASE_RUNNING;\nexport const isFinished = action => action.meta.phase === PHASE_FINISH;\n\nexport const continueWith = (payload, progress = 0) => action => {\n    if (!isReduxSagaMateAction(action)) {\n        throw new Error(getInvalidActionMessage(action));\n    }\n\n    return {\n        ...action,\n        payload,\n        meta: {\n            ...action.meta,\n            phase: PHASE_RUNNING,\n            progress,\n            utime: (new Date()).toISOString(),\n        },\n    };\n};\n\nexport const succeedWith = curry((payload, action) => {\n    if (!isReduxSagaMateAction(action)) {\n        throw new Error(getInvalidActionMessage(action));\n    }\n\n    return {\n        ...action,\n        payload,\n        meta: {\n            ...action.meta,\n            phase: PHASE_FINISH,\n            progress: 100,\n            utime: (new Date()).toISOString(),\n        },\n    };\n});\n\nexport const failWith = curry((error, action) => {\n    if (!isReduxSagaMateAction(action)) {\n        throw new Error(getInvalidActionMessage(action));\n    }\n\n    return {\n        ...action,\n        payload: error,\n        error: true,\n        meta: {\n            ...action.meta,\n            phase: PHASE_FINISH,\n            progress: 100,\n            utime: (new Date()).toISOString(),\n        },\n    };\n});\n\nexport const isChildOf = curry((parent, child) => {\n    if (!isReduxSagaMateAction(parent)) {\n        throw new Error(getInvalidActionMessage(parent));\n    }\n\n    if (!isReduxSagaMateAction(child)) {\n        throw new Error(getInvalidActionMessage(child));\n    }\n\n    return (parent.meta.id === child.meta.pid);\n});\n\nexport const makeChildOf = curry((parent, child) => {\n    if (!isReduxSagaMateAction(parent)) {\n        throw new Error(getInvalidActionMessage(parent));\n    }\n\n    if (!isReduxSagaMateAction(child)) {\n        throw new Error(getInvalidActionMessage(child));\n    }\n\n    const childAction = trackFor(parent)(child);\n\n    return {\n        ...childAction,\n        meta: {\n            ...childAction.meta,\n            phase: PHASE_STARTED,\n            progress: 0,\n        },\n    };\n});\n\nexport const createTrackableAction = (action, uniq = false) => {\n    if (!isReduxSagaMateAction(action)) {\n        throw new Error(getInvalidActionMessage(action));\n    }\n\n    return {\n        ...action,\n        meta: {\n            sign: SIGN,\n            id: idOfAction(action, uniq),\n            pid: undefined,\n            phase: PHASE_STARTED,\n            progress: 0,\n            ctime: (new Date()).toISOString(),\n            uniq,\n        },\n    };\n};\n\nexport const createAsyncAction = curry((type, payload) => (\n    createTrackableAction({type, payload})\n));\n\nexport const createAsyncActionUnique = curry((type, payload) => (\n    createTrackableAction({type, payload}, true)\n));\n","import Errio from 'errio';\nimport isPlainObject from 'is-plain-object';\nimport compose from 'ramda/src/compose';\nimport omit from 'ramda/src/omit';\nimport mergeDeepWithKey from 'ramda/src/mergeDeepWithKey';\nimport mergeDeepRight from 'ramda/src/mergeDeepRight';\nimport keys from 'ramda/src/keys';\nimport reduce from 'ramda/src/reduce';\nimport uniq from 'ramda/src/uniq';\nimport path from 'ramda/src/path';\nimport flatten from 'ramda/src/flatten';\nimport map from 'ramda/src/map';\nimport set from 'ramda/src/set';\nimport lensProp from 'ramda/src/lensProp';\nimport {isFinished} from './action';\nimport {UPDATE, DELETE} from './operation';\nimport {SIGN} from './sign';\n\nconst DEFAULT_CLEANUP_ACTION_TYPE = 'CLEANUP_TRACKABLE_ACTION';\nconst DEFAULT_ASYNC_ACTION_TYPE_REGEX = /^(REST|API|LOAD|ASYNC|FETCH|AJAX)_[0-9A-Z_]+$/;\n\nexport const createActionsReducer = ([\n    CleanupActionType,\n    AsyncActionTypeRegex,\n] = [\n    DEFAULT_CLEANUP_ACTION_TYPE,\n    DEFAULT_ASYNC_ACTION_TYPE_REGEX,\n]) => (state = {}, action) => {\n    if (action.type === CleanupActionType) {\n        return (\n            Array.isArray(action.payload)\n                ? omit(action.payload, state)\n                : omit([action.payload], state)\n        );\n    }\n\n    // there is nothing we can do without correct meta\n    if (!isPlainObject(action.meta) || action.meta.sign !== SIGN || !action.meta.id) {\n        return state;\n    }\n\n    if (AsyncActionTypeRegex.test(action.type)) {\n        return set(\n            lensProp(action.meta.id),\n            mergeDeepRight(action, {\n                payload: (\n                    action.error ? JSON.parse(Errio.stringify(action.payload)) : action.payload\n                ),\n            }),\n            state,\n        );\n    }\n\n    return state;\n};\n\nexport const createEntityTypeReducer = (\n    locators, entityType, operations,\n) => (state = {}, action) => {\n    if (!operations[action.type] || !isFinished(action) || action.error) {\n        return state;\n    }\n\n    const [operation, merger] = (\n        Array.isArray(operations[action.type]) ? operations[action.type] : [operations[action.type]]\n    );\n\n    if (!locators[operation]) {\n        return state;\n    }\n\n    const locator = locators[operation].find(a => path(a, action.payload));\n\n    if (!locator) {\n        return state;\n    }\n\n    if (operation === UPDATE) {\n        const merge = merger ? mergeDeepWithKey(merger) : mergeDeepRight;\n\n        const entities = path([...locator, entityType], action.payload);\n\n        if (!entities) {\n            return state;\n        }\n\n        return merge(state, path([...locator, entityType], action.payload));\n    }\n\n    if (operation === DELETE) {\n        const pk = path(locator, action.payload);\n\n        return omit(Array.isArray(pk) ? pk : [pk], state);\n    }\n\n    return state;\n};\n\nexport const createEntitiesReducer = (locators, entityActionMap) => compose(\n    reduce((reducers, entityType) => set(\n        lensProp(entityType),\n        createEntityTypeReducer(locators, entityType, entityActionMap[entityType]),\n        reducers,\n    ), {}),\n    keys,\n)(entityActionMap);\n\n/**\n * [{key1: fn1}, {key1: fn11}, {key2: fn2}, {key2: fn22, key3: fn3}]\n * =>\n * {key1: [fn1, fn11], key2: [fn2, fn22], key3: [fn3]}\n */\nexport const groupByComposeByEntityType = (...combinedReducers) => {\n    const entityTypes = compose(uniq, flatten, map(keys))(combinedReducers);\n\n    const queuedCombinedReducers = reduce(\n        (newCombined, entityType) => set(\n            lensProp(entityType),\n            reduce(\n                (queue, combined) => (\n                    combined[entityType] ? queue.concat([combined[entityType]]) : queue\n                ),\n                [],\n                combinedReducers,\n            ),\n            newCombined,\n        ),\n        {},\n        entityTypes,\n    );\n\n    const mergeQueuedReducers = compose(\n        reduce((acc, cur) => set(\n            lensProp(cur),\n            reduce(\n                (final, reducer) => (state, action) => reducer(final(state, action), action),\n                v => v,\n                queuedCombinedReducers[cur],\n            ),\n            acc,\n        ), {}),\n        keys,\n    );\n\n    return mergeQueuedReducers(queuedCombinedReducers);\n};\n","import {createElement, createContext} from 'react';\nimport {compose, withProps, withStateHandlers, wrapDisplayName} from 'recompose';\nimport identity from 'ramda/src/identity';\nimport set from 'ramda/src/set';\nimport lensPath from 'ramda/src/lensPath';\nimport dissocPath from 'ramda/src/dissocPath';\n\nconst withStates = withStateHandlers(\n    () => ({actionIds: {}}),\n    {\n        setActionId: state => (key, actionId) => {\n            const lens = (\n                Array.isArray(key)\n                    ? lensPath(['actionIds', ...key])\n                    : lensPath(['actionIds', key])\n            );\n            return set(lens, actionId, state);\n        },\n        unsetActionId: state => key => {\n            const path = Array.isArray(key) ? ['actionIds', ...key] : ['actionIds', key];\n            return dissocPath(path, state);\n        },\n    },\n);\n\nexport const withAsyncActionStateHandler = (mapToProps = identity) => compose(\n    withStates,\n    withProps(mapToProps),\n);\n\nexport const createAsyncActionContext = () => {\n    const {Provider, Consumer} = createContext(undefined);\n\n    const withAsyncActionContextProvider = ComponentIn => {\n        const ComponentOut = ({actionIds, setActionId, unsetActionId, ...rest}) => createElement(\n            Provider,\n            {value: {actionIds, setActionId, unsetActionId}},\n            createElement(ComponentIn, rest),\n        );\n\n        ComponentOut.displayName = wrapDisplayName(ComponentIn, 'withAsyncActionContextProvider');\n\n        return withStates(ComponentOut);\n    };\n\n    const withAsyncActionContextConsumer = ComponentIn => {\n        const ComponentOut = props => createElement(\n            Consumer,\n            null,\n            context => createElement(\n                ComponentIn,\n                {...props, ...context},\n            ),\n        );\n\n        ComponentOut.displayName = wrapDisplayName(ComponentIn, 'withAsyncActionContextConsumer');\n\n        return ComponentOut;\n    };\n\n    return {\n        withAsyncActionContextProvider,\n        withAsyncActionContextConsumer,\n    };\n};\n","import {createAction} from 'redux-actions';\nimport {call, put, select} from 'redux-saga/effects';\nimport {idOfAction, isFinished, failWith, succeedWith} from './action';\n\n// reducer和saga的执行顺序见下方issue\n// @see: https://github.com/redux-saga/redux-saga/issues/148\nexport const makeCreateDefaultWorker = (\n    [ErrorType, CleanupActionType],\n    {autoclear: autoclearByWorkerMaker} = {},\n) => (method, payload, {autoclear: autoClearByWorker} = {}) => (\n    function* defaultWorkerSaga(action) {\n        try {\n            if (isFinished(action)) {\n                return;\n            }\n\n            const state = yield select();\n\n            const json = yield call(method, (payload ? payload(state, action) : action.payload));\n\n            yield put(succeedWith(json)(action));\n\n            if (autoClearByWorker === true) {\n                yield put(createAction(CleanupActionType)(idOfAction(action)));\n                return;\n            }\n            if (autoClearByWorker === false) {\n                return;\n            }\n            if (autoclearByWorkerMaker === true) {\n                yield put(createAction(CleanupActionType)(idOfAction(action)));\n                return;\n            }\n        } catch (error) {\n            if (error instanceof ErrorType) {\n                yield put(failWith(error)(action));\n                return;\n            }\n            throw error;\n        }\n    }\n);\n","import {createSelector} from 'reselect';\nimport keys from 'ramda/src/keys';\nimport omit from 'ramda/src/omit';\nimport set from 'ramda/src/set';\nimport lensProp from 'ramda/src/lensProp';\nimport {isFinished} from './action';\n\nexport const createSelectActions = (selectActions, selectActionIds) => createSelector(\n    [selectActions, selectActionIds],\n    (actions, actionIds) => {\n        const reduceRecursively = function reduceRecursively(nextActionIds) {\n            return keys(nextActionIds).reduce((acc, id) => {\n                if (typeof nextActionIds[id] === 'string') {\n                    if (!actions[nextActionIds[id]]) {\n                        return acc;\n                    }\n\n                    const action = actions[nextActionIds[id]];\n\n                    return set(\n                        lensProp(id),\n                        omit(['type', 'meta'], set(lensProp('isLoading'), !isFinished(action), action)),\n                        acc,\n                    );\n                }\n                return set(lensProp(id), reduceRecursively(nextActionIds[id]), acc);\n            }, {});\n        };\n\n        return reduceRecursively(actionIds);\n    },\n);\n","export const PAGE_SIZE_OF_TODO_LIST = 5;\nexport const LOCAL_STORAGE_REDUX_STORE_KEY = 'REDUX-SAGA-MATE-DEMO-REDUX-STORE';\nexport const LOCAL_STORAGE_PATH_BEFORE_404 = 'REDUX-SAGA-MATE-DEMO-PATH-BEFORE-404';\n","/* global window */\nconst {DOMException} = window;\n\nexport const delay = (seconds, signal = {}) => {\n    if (signal.aborted) {\n        return Promise.reject(new DOMException('Aborted', 'AbortError'));\n    }\n\n    return new Promise((resolve, reject) => {\n        const timer = window.setTimeout(resolve, seconds * 1000);\n\n        // eslint-disable-next-line\n        signal.onabort = () => {\n            window.clearTimeout(timer);\n            reject(new DOMException('Aborted', 'AbortError'));\n        };\n    });\n};\n\n// @see https://stackoverflow.com/questions/30452263/is-there-a-mechanism-to-loop-x-times-in-es6-ecmascript-6-without-mutable-varia\nconst recur = (...args) => ({type: recur, args});\n\nconst loop = f => {\n    let acc = f();\n    while (acc.type === recur) {\n        acc = f(...acc.args);\n    }\n    return acc;\n};\n\nexport const repeat = $n => f => x => loop(\n    (n = $n, acc = x) => (n === 0 ? acc : recur(n - 1, f(acc))),\n);\n\nexport const offsetToPage = (offset, limit = 10) => offset / limit + 1;\n\nexport const pageToOffset = (page, limit = 10) => (\n    page > 1 ? (page - 1) * limit : 0\n);\n\nexport const e2e = str => `test-id-${str}`;\n"],"sourceRoot":""}